<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP Scroll Accordion Reveal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #fafafa;
            margin: 0;
            overflow-x: hidden;
        }

        /* --- Main Pinned Container --- */
        #pin-master {
            height: 100vh;
            display: flex;
            align-items: center;
            background: #ffffff;
            overflow: hidden;
        }

        /* --- Left Side: Accordion --- */
        .acc-item {
            margin-bottom: 20px;
            position: relative;
        }

        .acc-header {
            display: flex;
            align-items: center;
            font-size: 2.5rem;
            font-weight: 800;
            color: #111;
            margin-bottom: 10px;
        }

        /* The Dotted Circle Slot */
        .dotted-slot {
            width: 46px;
            height: 46px;
            border: 2px dotted #ccc;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 20px;
            position: relative;
        }

        /* The Animated Ball */
        .ball {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            /* Hidden and moved to the left initially */
            /* opacity: 1;
            transform: translateY(-300px) scale(0.5);
            will-change: transform, opacity; */
        }
        .ball.ball-1{
            opacity: 1;
            transform: translateY(-300px) scale(0.5);
            will-change: transform, opacity;
        }
        .ball.ball-2{
            opacity: 1;
            transform: translateY(-600px) scale(0.5);
            will-change: transform, opacity;
        }
        .ball.ball-3{
            opacity: 1;
            transform: translateY(-900px) scale(0.5);
            will-change: transform, opacity;
        }
        .bg-red { background-color: #FF4D4D; }
        .bg-blue { background-color: #4D4DFF; }
        .bg-purple { background-color: #A020F0; }

        /* The Content Area (List Items) */
        .acc-content {
            /* Start collapsed */
            height: 0;
            overflow: hidden;
            padding-left: 66px; /* Align with text, not the circle */
        }

        .acc-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
            padding-bottom: 20px;
        }

        .acc-content li {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 12px;
            color: #333;
            /* Hidden and moved left for the slide-in animation */
            opacity: 0;
            transform: translateX(-40px);
            will-change: transform, opacity;
        }

        /* --- Right Side: Visuals --- */
        .visual-container {
            position: relative;
            width: 100%;
            height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .visual-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0; /* Hidden initially */
            transform: scale(0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f4f5f7;
            border-radius: 20px;
            will-change: opacity, transform;
        }
    </style>
</head>
<body>

    <div style="height: 100vh; display: flex; justify-content: center; align-items: center; background: #f0f0f0;">
        <h1>Scroll Down to Reveal</h1>
    </div>

    <section id="pin-master">
        <div class="container">
            <div class="row align-items-center">
                
                <div class="col-md-5 offset-md-1">
                    
                    <div class="acc-item" id="item-1">
                        <div class="acc-header">
                            <div class="dotted-slot"><div class="ball bg-red ball-1"></div></div>
                            <span style="color: #FF4D4D;">Design</span>
                        </div>
                        <div class="acc-content content-1">
                            <ul>
                                <li>UI Design</li>
                                <li>UX Design</li>
                                <li>UX Consultancy</li>
                                <li>Design System</li>
                                <li>Animation</li>
                                <li>Illustrations</li>
                            </ul>
                        </div>
                    </div>

                    <div class="acc-item" id="item-2">
                        <div class="acc-header">
                            <div class="dotted-slot"><div class="ball bg-blue ball-2"></div></div>
                            <span style="color: #111;" class="title-2">Technology</span>
                        </div>
                        <div class="acc-content content-2">
                            <ul>
                                <li>Web Development</li>
                                <li>Mobile Apps</li>
                                <li>Web Apps</li>
                                <li>Front-End</li>
                                <li>Back-End</li>
                            </ul>
                        </div>
                    </div>

                    <div class="acc-item" id="item-3">
                        <div class="acc-header">
                            <div class="dotted-slot"><div class="ball bg-purple ball-3"></div></div>
                            <span style="color: #111;" class="title-3">Marketing</span>
                        </div>
                        <div class="acc-content content-3">
                            <ul>
                                <li>Branding</li>
                                <li>Brand Strategy</li>
                                <li>Digital Marketing</li>
                                <li>S.E.O.</li>
                            </ul>
                        </div>
                    </div>

                </div>

                <div class="col-md-5 offset-md-1">
                    <div class="visual-container">
                        <div class="visual-item vis-1">
                            <h2 style="color: #FF4D4D;">Design Illustration Here</h2>
                        </div>
                        <div class="visual-item vis-2">
                            <h2 style="color: #4D4DFF;">Tech Code Snippet Here</h2>
                        </div>
                        <div class="visual-item vis-3">
                            <h2 style="color: #A020F0;">Marketing Chart Here</h2>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <div style="height: 100vh; background: #f0f0f0;"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // Utility to get natural height of an element
        function getAutoHeight(element) {
            gsap.set(element, { height: "auto" });
            const height = element.offsetHeight;
            gsap.set(element, { height: 0 }); // reset
            return height;
        }

        window.addEventListener("load", () => {
            const content1 = document.querySelector(".content-1");
            const content2 = document.querySelector(".content-2");
            const content3 = document.querySelector(".content-3");

            // Calculate exact heights so GSAP can animate them smoothly
            const h1 = getAutoHeight(content1);
            const h2 = getAutoHeight(content2);
            const h3 = getAutoHeight(content3);

            // Master Timeline
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#pin-master",
                    start: "top top",
                    end: "+=3000", // Length of the scroll experience
                    pin: true,
                    scrub: 1, // Smoothly ties animation to scroll speed
                    anticipatePin: 1
                }
            });

            // --- PHASE 1: Design Section Reveals ---
            tl.addLabel("phase1")
              // 1. Ball flies into the first slot
              .to(".ball-1", { y: 0, opacity: 1, scale: 1, duration: 0.5, ease: "back.out(1.5)" }, "phase1")
              // 2. Accordion opens smoothly
              .to(".content-1", { height: h1, duration: 0.6, ease: "power2.inOut" }, "phase1")
              // 3. Right visual fades in
              .to(".vis-1", { opacity: 1, scale: 1, duration: 0.6, ease: "power2.out" }, "phase1")
              // 4. List items slide in from the left one by one
              .to(".content-1 li", { x: 0, opacity: 1, duration: 0.4, stagger: 0.1, ease: "power2.out" }, "phase1+=0.2");


            // --- PHASE 2: Transition to Technology ---
            tl.addLabel("phase2", "+=0.5") // Add a small pause before moving to the next
              // Collapse Design
              .to(".content-1 li", { opacity: 0, x: -20, duration: 0.3, stagger: -0.05 }, "phase2")
              .to(".content-1", { height: 0, duration: 0.6, ease: "power2.inOut" }, "phase2+=0.2")
              .to(".vis-1", { opacity: 0, scale: 0.95, duration: 0.4 }, "phase2")
              
              // Change Text Colors
              .to(".title-2", { color: "#4D4DFF", duration: 0.3 }, "phase2+=0.2")

              // Open Technology
              .to(".ball-2", { y: 1, opacity: 1, scale: 1, duration: 0.5, ease: "back.out(1.5)" }, "phase2+=0.2")
              .to(".content-2", { height: h2, duration: 0.6, ease: "power2.inOut" }, "phase2+=0.2")
              .to(".vis-2", { opacity: 1, scale: 1, duration: 0.6, ease: "power2.out" }, "phase2+=0.2")
              .to(".content-2 li", { x: 0, opacity: 1, duration: 0.4, stagger: 0.1, ease: "power2.out" }, "phase2+=0.4");


            // --- PHASE 3: Transition to Marketing ---
            tl.addLabel("phase3", "+=0.5")
              // Collapse Technology
              .to(".content-2 li", { opacity: 0, x: -20, duration: 0.3, stagger: -0.05 }, "phase3")
              .to(".content-2", { height: 0, duration: 0.6, ease: "power2.inOut" }, "phase3+=0.2")
              .to(".vis-2", { opacity: 0, scale: 0.95, duration: 0.4 }, "phase3")
              
              // Change Text Colors
              .to(".title-3", { color: "#A020F0", duration: 0.3 }, "phase3+=0.2")

              // Open Marketing
              .to(".ball-3", { y: 2, opacity: 1, scale: 1, duration: 0.5, ease: "back.out(1.5)" }, "phase3+=0.2")
              .to(".content-3", { height: h3, duration: 0.6, ease: "power2.inOut" }, "phase3+=0.2")
              .to(".vis-3", { opacity: 1, scale: 1, duration: 0.6, ease: "power2.out" }, "phase3+=0.2")
              .to(".content-3 li", { x: 0, opacity: 1, duration: 0.4, stagger: 0.1, ease: "power2.out" }, "phase3+=0.4");

        });
    </script>
</body>
</html>